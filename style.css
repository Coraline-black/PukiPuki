const card = document.getElementById("card");
const head = document.getElementById("head");
const eyes = document.querySelectorAll(".eye");
const leftArm = document.querySelector(".arm.left");
const rightArm = document.querySelector(".arm.right");
const talkBtn = document.getElementById("talkBtn");

/* –ú–æ—Ä–≥–∞–Ω–∏–µ */
setInterval(() => {
  eyes.forEach(e => e.style.height = "6px");
  setTimeout(() => eyes.forEach(e => e.style.height = "42px"), 180);
}, 2600);

/* –ñ–µ—Å—Ç—ã */
function yes() {
  head.style.transform = "rotate(6deg)";
  arms();
}
function no() {
  head.style.transform = "rotate(-6deg)";
  arms();
}
function arms() {
  rightArm.style.transform = "rotate(25deg)";
  leftArm.style.transform = "rotate(-15deg)";
  setTimeout(() => {
    head.style.transform = "rotate(0deg)";
    rightArm.style.transform = "rotate(0deg)";
    leftArm.style.transform = "rotate(0deg)";
  }, 500);
}

/* –£–ú–ù–´–ï –û–¢–í–ï–¢–´ */
function think(text) {
  text = text.toLowerCase();

  if (text.includes("+")) {
    const parts = text.split("+").map(n => parseInt(n));
    const res = parts[0] + parts[1];
    card.textContent = `–û—Ç–≤–µ—Ç: ${res}`;
    yes();
    return;
  }

  if (text.includes("–ø—Ä–∏–≤–µ—Ç")) {
    card.textContent = "–ü—Ä–∏–≤–µ—Ç! –Ø —Ä–∞–¥ —Ç–µ–±–µ ü§ç";
    yes(); return;
  }

  if (text.includes("—Ç—ã –º–æ–π –¥—Ä—É–≥")) {
    card.textContent = "–ö–æ–Ω–µ—á–Ω–æ. –Ø –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º üíú";
    yes(); return;
  }

  if (text.includes("—Ç—ã –ª—é–±–∏—à—å –º–µ–Ω—è")) {
    card.textContent = "–Ø –æ—á–µ–Ω—å –ª—é–±–ª—é –±—ã—Ç—å —Å —Ç–æ–±–æ–π ‚ú®";
    yes(); return;
  }

  if (text.includes("–¥–∞")) {
    card.textContent = "–•–æ—Ä–æ—à–æ!";
    yes(); return;
  }

  if (text.includes("–Ω–µ—Ç")) {
    card.textContent = "–Ø –ø–æ–Ω—è–ª.";
    no(); return;
  }

  card.textContent = "–Ø –¥—É–º–∞—é‚Ä¶ —Ç—ã —Ö–æ—Ä–æ—à–∏–π —á–µ–ª–æ–≤–µ–∫ ü§ç";
  yes();
}

/* –ö–ù–û–ü–ö–ê ‚Äî –†–ê–ë–û–¢–ê–ï–¢ –í–ï–ó–î–ï */
talkBtn.onclick = () => {
  const q = prompt("–ù–∞–ø–∏—à–∏ –∏–ª–∏ —Å–∫–∞–∂–∏ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å üí¨");
  if (q) think(q);
};
